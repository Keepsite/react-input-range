{"version":3,"sources":["../../../src/js/input-range/track.jsx"],"names":["Track","children","node","isRequired","classNames","objectOf","string","draggableTrack","bool","onTrackDrag","func","onTrackMouseDown","percentages","number","withActive","suggestedPercentages","isMultiValue","withError","errorPercentages","props","trackDragEvent","getBoundingClientRect","width","max","min","left","removeDocumentMouseMoveListener","ownerDocument","addEventListener","handleMouseMove","removeDocumentMouseUpListener","handleMouseUp","removeEventListener","event","clientX","touches","trackClientRect","getClientRect","position","x","y","addDocumentMouseMoveListener","addDocumentMouseUpListener","preventDefault","handleMouseDown","activeTrack","activeTrackStyle","getActiveTrackStyleWithError","getActiveTrackStyle","suggestedTrack","suggestedTrackStyle","getSuggestedTrackStyle","transform","track","handleTouchStart","Component"],"mappings":"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","file":"track.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport autobind from 'autobind-decorator';\n\n/**\n * @ignore\n */\nexport default class Track extends React.Component {\n  /**\n   * @override\n   * @return {Object}\n   * @property {Function} children\n   * @property {Function} classNames\n   * @property {Boolean} draggableTrack\n   * @property {Function} onTrackDrag\n   * @property {Function} onTrackMouseDown\n   * @property {Function} percentages\n   */\n  static get propTypes() {\n    return {\n      children: PropTypes.node.isRequired,\n      classNames: PropTypes.objectOf(PropTypes.string).isRequired,\n      draggableTrack: PropTypes.bool,\n      onTrackDrag: PropTypes.func,\n      onTrackMouseDown: PropTypes.func.isRequired,\n      percentages: PropTypes.objectOf(PropTypes.number).isRequired,\n      withActive: PropTypes.bool,\n      suggestedPercentages: PropTypes.objectOf(PropTypes.number),\n      isMultiValue: PropTypes.bool,\n      withError: PropTypes.bool,\n      errorPercentages: PropTypes.objectOf(PropTypes.number),\n    };\n  }\n\n  /**\n   * @param {Object} props\n   * @param {InputRangeClassNames} props.classNames\n   * @param {Boolean} props.draggableTrack\n   * @param {Function} props.onTrackDrag\n   * @param {Function} props.onTrackMouseDown\n   * @param {number} props.percentages\n   */\n  constructor(props) {\n    super(props);\n\n    /**\n     * @private\n     * @type {?Component}\n     */\n    this.node = null;\n    this.trackDragEvent = null;\n  }\n\n  /**\n   * @private\n   * @return {ClientRect}\n   */\n  getClientRect() {\n    return this.node.getBoundingClientRect();\n  }\n\n  /**\n   * @private\n   * @return {Object} CSS styles\n   */\n  getActiveTrackStyle() {\n    const width = `${(this.props.percentages.max - this.props.percentages.min) * 100}%`;\n    const left = `${this.props.percentages.min * 100}%`;\n\n    return { left, width };\n  }\n\n  getSuggestedTrackStyle() {\n    const width = `${(this.props.suggestedPercentages.max - this.props.suggestedPercentages.min) * 100}%`;\n    const left = `${this.props.suggestedPercentages.min * 100}%`;\n\n    return { left, width };\n  }\n\n  getActiveTrackStyleWithError() {\n    const width = `${(this.props.errorPercentages.max - this.props.errorPercentages.min) * 100}%`;\n    const left = `${this.props.errorPercentages.min * 100}%`;\n\n    return { left, width };\n  }\n\n  /**\n   * Listen to mousemove event\n   * @private\n   * @return {void}\n   */\n  addDocumentMouseMoveListener() {\n    this.removeDocumentMouseMoveListener();\n    this.node.ownerDocument.addEventListener('mousemove', this.handleMouseMove);\n  }\n\n  /**\n   * Listen to mouseup event\n   * @private\n   * @return {void}\n   */\n  addDocumentMouseUpListener() {\n    this.removeDocumentMouseUpListener();\n    this.node.ownerDocument.addEventListener('mouseup', this.handleMouseUp);\n  }\n\n  /**\n   * @private\n   * @return {void}\n   */\n  removeDocumentMouseMoveListener() {\n    this.node.ownerDocument.removeEventListener('mousemove', this.handleMouseMove);\n  }\n\n  /**\n   * @private\n   * @return {void}\n   */\n  removeDocumentMouseUpListener() {\n    this.node.ownerDocument.removeEventListener('mouseup', this.handleMouseUp);\n  }\n\n  /**\n   * @private\n   * @param {SyntheticEvent} event\n   * @return {void}\n   */\n  @autobind\n  handleMouseMove(event) {\n    if (!this.props.draggableTrack) {\n      return;\n    }\n\n    if (this.trackDragEvent !== null) {\n      this.props.onTrackDrag(event, this.trackDragEvent);\n    }\n\n    this.trackDragEvent = event;\n  }\n\n  /**\n   * @private\n   * @return {void}\n   */\n  @autobind\n  handleMouseUp() {\n    if (!this.props.draggableTrack) {\n      return;\n    }\n\n    this.removeDocumentMouseMoveListener();\n    this.removeDocumentMouseUpListener();\n    this.trackDragEvent = null;\n  }\n\n  /**\n   * @private\n   * @param {SyntheticEvent} event - User event\n   */\n  @autobind\n  handleMouseDown(event) {\n    const clientX = event.touches ? event.touches[0].clientX : event.clientX;\n    const trackClientRect = this.getClientRect();\n    const position = {\n      x: clientX - trackClientRect.left,\n      y: 0,\n    };\n\n    this.props.onTrackMouseDown(event, position);\n\n    if (this.props.draggableTrack) {\n      this.addDocumentMouseMoveListener();\n      this.addDocumentMouseUpListener();\n    }\n  }\n\n  /**\n   * @private\n   * @param {SyntheticEvent} event - User event\n   */\n  @autobind\n  handleTouchStart(event) {\n    event.preventDefault();\n\n    this.handleMouseDown(event);\n  }\n\n  /**\n   * @override\n   * @return {JSX.Element}\n   */\n  render() {\n    let activeTrack;\n    if (this.props.withActive && !this.props.isMultiValue && this.props.withError) {\n      const activeTrackStyle = this.getActiveTrackStyleWithError();\n      activeTrack = (<div style={activeTrackStyle} className={this.props.classNames.activeTrack} />);\n    } else if (this.props.withActive) {\n      const activeTrackStyle = this.getActiveTrackStyle();\n      activeTrack = (<div style={activeTrackStyle} className={this.props.classNames.activeTrack} />);\n    }\n\n    let suggestedTrack;\n    if (this.props.suggestedPercentages.max !== 0) {\n      const suggestedTrackStyle = this.getSuggestedTrackStyle();\n      if (!this.props.isMultiValue && !this.props.withError) {\n        suggestedTrackStyle.transform = 'translateX(50%)';\n      }\n      suggestedTrack = (<div style={suggestedTrackStyle} className={this.props.classNames.suggestedTrack} />);\n    }\n\n    return (\n      <div\n        className={this.props.classNames.track}\n        onMouseDown={this.handleMouseDown}\n        onTouchStart={this.handleTouchStart}\n        ref={(node) => { this.node = node; }}>\n        {suggestedTrack}\n        {activeTrack}\n        {this.props.children}\n      </div>\n    );\n  }\n}\n"]}